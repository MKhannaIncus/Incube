<body class ="style-page">
  <div class="container mt-4">   
    <div class="row">
      <div class="col-12">
        <div class="deals-list">
          <div>
            <div class="row">
              <div class="col">
                  <select class="form-select" [(ngModel)]="selectedFund" (change)="onFundChange()">
                      <option value="">--Choose a fund--</option>
                      <option value="FundIII">Fund III</option>
                      <option value="FundIV">Fund IV</option>
                  </select>
              </div>
              <div class="col newDealButton">
                  <button type="button" class="btn btn-primary" (click)="popup=true">New Deal</button>
              </div>
          </div>
          </div>
          <!-- Loop through each deal and display it using Bootstrap's card component -->
          <div *ngFor="let deal of deals" class="card mb-3">
            <div class="card-body floating-rectangle" (click)="pageRedirection(deal.deal_Id)">
              <div class="rows-list row align-items-center"> <!-- Aligns items vertically in the center -->
                <div class="col-md-3">
                  <div class="deal-icon">
                    <img [src]="deal.deal_Id % 2 === 0 ? 'assets/plane-svgrepo-com.svg' : 'assets/sun-svgrepo-com.svg'" alt="Deal Icon" class="icon-image"/>
                  </div>

                  <strong class="d-block text-uppercase">{{deal.deal_Name }}</strong>
                  <p>Deal ID: {{ deal.deal_Id }}</p>
                </div>
                <div class="col-md-3">
                  <strong class="d-block text-uppercase">Country</strong>
                </div>
                <div class="col-md-3">
                  <strong class="d-block text-uppercase">Sector</strong>
                  <p>{{ deal.sector }}</p> <!-- Assuming 'sector' is part of your deal object -->
                </div>
                <div class="col-md-3">
                  <strong class="d-block text-uppercase">{{deal.investment_date| date}}</strong>
                </div>
              </div>
            </div>
          </div>
          <!-- Button to open the popup for a new deal -->
        </div>
      </div>
    </div>



    <!-- Popup Overlay for adding a new deal -->
    <div class="modal fade show" *ngIf="popup" style="display: block;" aria-hidden="!popup" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Add New Deal</h5>
            <button type="button" class="close" (click)="popup = false">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <app-add-new-deal></app-add-new-deal> <!-- Ensure this component is declared and imported correctly -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('fund-select').addEventListener('change', function() {
      var selectedValue = this.value;
      if (selectedValue) {
        document.getElementById('selected-fund').innerText = 'You have selected: ' + selectedValue;
      } else {
        document.getElementById('selected-fund').innerText = '';
      }
    });
  </script>